var e=require("rlp"),n=function(e,n){return Buffer.from(e.padStart(2*n,0),"hex")},r=function(e){return n(e,20)},o=function(n){return e.encode(n).toString("hex")},t=function(e){return u(e),[(t=e.script,Buffer.from(t,"utf8")),(o=e.refBlock,n(o,32)),e.gasLimit,r(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,r(e.payer),e.authorizers.map(r)];var o,t},c=function(e){var n=a(e);return e.payloadSigs.map(function(e){return{signerIndex:n.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,n){return e.signerIndex>n.signerIndex?1:e.signerIndex<n.signerIndex?-1:e.keyId>n.keyId?1:e.keyId<n.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,(n=e.sig,Buffer.from(n,"hex"))];var n})},a=function(e){var n=new Map,r=0,o=function(e){n.has(e)||(n.set(e,r),r++)};return o(e.proposalKey.address),o(e.payer),e.authorizers.forEach(o),n},u=function(e){p.forEach(function(n){return k(e,n)}),l.forEach(function(n){return k(e.proposalKey,n,"proposalKey")})},i=function(e){return"number"==typeof e},f=function(e){return"string"==typeof e},s=function(e){return null!==e&&"object"==typeof e},d=function(e){return s(e)&&e instanceof Array},p=[{name:"script",check:f},{name:"refBlock",check:f,defaultVal:"0"},{name:"gasLimit",check:i},{name:"proposalKey",check:s},{name:"payer",check:f},{name:"authorizers",check:d}],l=[{name:"address",check:f},{name:"keyId",check:i},{name:"sequenceNum",check:i}],h=[{name:"payloadSigs",check:d}],y=[{name:"address",check:f},{name:"keyId",check:i},{name:"sig",check:f}],k=function(e,n,r,o){var t=n.name,c=n.check,a=n.defaultVal;if(null==e[t]&&null!=a&&(e[t]=a),null==e[t])throw g(t,r,o);if(!c(e[t]))throw I(t,r,o)},m=function(e,n,r){return n?null==r?n+"."+e:n+"."+r+"."+e:e},g=function(e,n,r){return new Error("Missing field "+m(e,n,r))},I=function(e,n,r){return new Error("Invalid field "+m(e,n,r))};exports.encodeTransactionEnvelope=function(e){return o(function(e){return function(e){h.forEach(function(n){return k(e,n)}),e.payloadSigs.forEach(function(e,n){y.forEach(function(r){return k(e,r,"payloadSigs",n)})})}(e),[t(e),c(e)]}(e))},exports.encodeTransactionPayload=function(e){return o(t(e))};
//# sourceMappingURL=encode.js.map
